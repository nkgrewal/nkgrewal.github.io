package  {		import flash.display.Sprite;	import flash.display.MovieClip;	import flash.events.MouseEvent;	import gs.TweenLite;	import flash.display.Shape;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.events.Event;			public class SalaryMap extends MovieClip {				private var usMap:US_Map = new US_Map ();		private var cityArray:Array = new Array () ;		private var bubble:MovieClip = new MovieClip ();				private var cityName:TextField = new TextField ();		private var psychSal:TextField = new TextField ();		private var counsSal:TextField = new TextField ();		private var cityNFormat:TextFormat = new TextFormat ();		private var psychSFormat:TextFormat = new TextFormat ();		private var counsSFormat:TextFormat = new TextFormat ();				private var mapX:int = 3;		private var mapY:int = 100;		private var bTextSpace:int = 5;		private var bubbleWidth:uint = 53;		private var cityX:int = new int;		private var cityY:int = new int;				private var salaryObj:Object;				//private var xmlLoader:URLLoader = new URLLoader ();		//public var salaryXML:XML = new XML ();				public function SalaryMap () {						populateObj( );						//adds and positions map			addChild ( usMap );			usMap.x=mapX;			usMap.y=mapY;						//loops through usMap object and places children (dots representing cities) into cityArray			for ( var i:uint = 0; i < usMap.usCities.numChildren ; i++ ) {				//gets instance of city-dot at current "i" position in parent object and places it into tmpCity:movieclip				var tmpCity:Sprite = Sprite ( usMap.usCities.getChildAt(i) );								//adds hover event listeners onto current city-dot				tmpCity.addEventListener ( MouseEvent.ROLL_OVER, overState, false, 0, true );				tmpCity.addEventListener ( MouseEvent.ROLL_OUT, offState, false, 0, true );				tmpCity.useHandCursor = true;				tmpCity.buttonMode = true;								//pushes city-dot instance into cityArray				cityArray.push( tmpCity );			}						/*loads XML file of city info and kicks over to "processXML" function			xmlLoader.addEventListener ( Event.COMPLETE, processXML );			xmlLoader.load ( new URLRequest ( "citySalaries.xml" ) );*/						trace (cityArray[33].name);					}				/*pulls XML data into salaryXML var		private function processXML( e:Event ):void {			salaryXML = new XML ( e.target.data );		}*/				//hover state for city-dots		private function overState ( e:MouseEvent ) {			//places concatenated city-dot instance name into cityText:string			var cityText:String = e.target.name.toUpperCase().split('_').join(' ').split('1').join('.');			//places hover city-dot's X/Y coordinates in vars			cityX = e.target.x;			cityY = e.target.y;			//calculates difference between city-dot's hover and off sizes and places in vars			var newcityX:int = e.target.width - e.target.width*1.1;			var newcityY:int = e.target.height - e.target.height*1.1;			//calculated width for dynamic text fields			var setTextWidth:int = bubbleWidth * 2 - bTextSpace - 4;						//scales size and position of city-dot			TweenLite.to( e.target, .25, { alpha:1, scaleX:1.3, scaleY:1.3, x:cityX + newcityX, y:cityY + newcityY } );						//INSTANTIATES POP UP BUBBLE ONTO STAGE			makeBubble ();						//calculates X/Y coordinates of pop up based on active city-dot's coordinates			if ( cityX < 355) { bubble.x = cityX - 55 }			else if ( cityX < 50 ) { bubble.x = 60 }			else { bubble.x = 338 };			if ( cityY > 1 ) { bubble.y = cityY + 20 }			else if ( cityY < 1 ) { bubble.y = 15 }			else { bubble.y = 15 };						//calls text into dynamic fields			cityName.text = cityText;			psychSal.text = "$ " + salaryObj [ e.target.name ][ 0 ];			counsSal.text = "$ " + salaryObj [ e.target.name ][ 1 ];			//psychSal.text = "$ " + salaryXML.cityinfo.( @name == cityText.toLowerCase() ).psych;			//counsSal.text = "$ " + salaryXML.cityinfo.( @name == cityText.toLowerCase() ).couns;						//sets width for text fields			cityName.width = setTextWidth - 5;			cityName.multiline = true;			cityName.wordWrap = true;			psychSal.width = setTextWidth;			counsSal.width = setTextWidth;						//city-dot's name text style			cityNFormat.color = 0x606060;			cityNFormat.size = 11;			cityNFormat.font = "Helvetica Neue";			cityNFormat.bold = true;			cityNFormat.align ="center";			cityNFormat.leading = 1;			cityNFormat.letterSpacing = -0.3;						//counselor salary text style						counsSFormat.color = 0xD37000;			counsSFormat.size = 14;			counsSFormat.font = "Helvetica Neue";			counsSFormat.bold = true;			counsSFormat.align ="center";			counsSFormat.letterSpacing = .3;						//psychology salary text style			psychSFormat.color = 0x0484C8;			psychSFormat.size = 14;			psychSFormat.font = "Helvetica Neue";			psychSFormat.bold = true;			psychSFormat.align ="center";			psychSFormat.letterSpacing = .3;						//two-line city name - positions Y coordinates of text fields based on text length			if ( cityName.length < 13 ) { cityName.y = 6; counsSal.y = 21; psychSal.y = 38; }			//one-line city name			else { cityName.y = -3; counsSal.y = 24; psychSal.y = 41; };						//positions X coordinates of text fields based on text length			cityName.x = bTextSpace + 4;			psychSal.x = bTextSpace + 1;			counsSal.x = bTextSpace + 1;						//sets text style			cityName.setTextFormat ( cityNFormat );			psychSal.setTextFormat ( psychSFormat );			counsSal.setTextFormat ( counsSFormat );		}				private function offState ( e:MouseEvent ) {			//resets city-dot's size and position			TweenLite.to ( e.target, .25, { alpha:1, scaleX:1, scaleY:1, x:cityX, y:cityY } );			e.target.x = cityX;			e.target.y = cityY;						//fades bubble out			TweenLite.to ( bubble, .2, { alpha:0 } );			//REMOVES POP UP OFF STAGE			//TweenLite.delayedCall( .2, removeBubble );			removeChild(bubble);		}				/*private function removeBubble ():void{			removeChild(bubble);		}*/				private function makeBubble () {			//background shape for bubble			var circle1:Shape = new Shape ();			var circle2:Shape = new Shape ();									//draws background circles			circle1.graphics.beginFill ( 0xcccccc, 1 );			circle1.graphics.drawCircle ( 54,30, bubbleWidth );			circle1.graphics.endFill ();			circle2.graphics.beginFill ( 0xffffff, 1 );			circle2.graphics.drawCircle ( 54,30, bubbleWidth - bTextSpace );			circle2.graphics.endFill ();						//avoids seizure pop-up			bubble.mouseEnabled = false;			bubble.mouseChildren = false;						//adds background and text fields into bubble pop-up			bubble.addChild ( circle1 );			bubble.addChild ( circle2 );			bubble.addChild ( cityName );			bubble.addChild ( psychSal );			bubble.addChild ( counsSal );						//adds bubble pop-up to stage			addChild ( bubble );			bubble.alpha = 0;			TweenLite.to ( bubble, .2, { alpha:1 } );		}				private function populateObj( ):void		{			salaryObj = { new_york : [ "96, 430" , "44, 410" ] ,						los_angeles : [ "101, 380" , "43, 510" ] ,						chicago : [ "79, 280" , "35, 660" ] ,						dallas : [ "88, 030" , "61, 780" ] ,						philadelphia : [ "88, 460" , "43, 350" ] ,						houston : [ "74, 690" , "58, 040" ] ,						miami : [ "142, 240" , "32, 470" ] ,						d1c1 : [ "100, 480" , "44, 560" ] ,						atlanta : [ "70, 410" , "53, 500" ] ,						boston : [ "83, 100" , "37, 330" ] ,						detroit : [ "94, 040" , "34, 400" ] ,						phoenix : [ "106, 570" , "43, 600" ] ,						san_francisco : [ "97, 610" , "49, 140" ] ,						riverside : [ "89, 320" , "49, 580" ] ,						seattle : [ "70, 890" , "51, 860" ] ,						minneapolis : [ "80, 670" , "39, 940" ] ,						san_diego : [ "95, 870" , "49, 680" ] ,						st1_louis : [ "83, 090" , "33, 420" ] ,						tampa : [ "85, 770" , "34, 490" ] ,						baltimore : [ "72, 720" , "35, 590" ] ,						denver : [ "91, 920" , "20, 050" ] ,						pittsburgh : [ "89, 980" , "43, 450" ] ,						portland : [ "90, 180" , "50, 290" ] ,						cincinnati : [ "83, 520" , "41, 260" ] ,						sacramento : [ "160, 850" , "49, 580" ] ,						cleveland : [ "87, 570" , "57, 330" ] ,						orlando : [ "82, 810" , "35, 090" ] ,						san_antonio : [ "88, 450" , "56, 510" ] ,						kansas_city : [ "80, 400" , "36, 170" ] ,						las_vegas : [ "80, 390" , "42, 190" ] ,						san_jose : [ "98, 050" , "36, 420" ] ,						columbus : [ "85, 100" , "41, 260" ] ,						charlotte : [ "95, 730" , "38, 360" ] ,						indianapolis : [ "84, 700" , "46, 690" ] ,						austin : [ "84, 700" , "52, 060" ] ,						virginia_beach : [ "96, 470" , "36, 430" ] ,						providence : [ "48, 430" , "30, 080" ] ,						nashville : [ "84, 720" , "31, 850" ] ,						milwaukee : [ "85, 850" , "35, 060" ] ,						jacksonville : [ "80, 030" , "33, 110" ] ,						memphis : [ "85, 570" , "31, 940" ] ,						louisville : [ "88, 450" , "17, 540" ] ,						richmond : [ "90, 190" , "33, 600" ] ,						oklahoma_city : [ "74, 140" , "25, 300" ] ,						hartford : [ "90, 360" , "30, 190" ] ,						new_orleans : [ "79, 080" , "36, 770" ] ,						birmingham : [ "91, 120" , "36, 140" ] ,						salt_lake_city : [ "80, 390" , "45, 760" ] ,						raleigh : [ "91, 120" , "38, 990" ] ,						buffalo : [ "69, 110" , "39, 920" ] ,						honolulu : [ "80, 040" , "34, 010" ] ,						anchorage : [ "81, 290" , "52, 150" ] };		}	}}